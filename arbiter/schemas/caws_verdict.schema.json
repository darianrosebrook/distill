{
  "$schema": "http://json-schema.org/draft-2020-12/schema",
  "title": "CAWS Verdict Schema",
  "description": "Constitutional verdict record for CAWS adjudication cycle",
  "type": "object",
  "required": ["verdict_id", "status", "timestamp", "change_id", "caws_compliance"],
  "properties": {
    "verdict_id": {
      "type": "string",
      "pattern": "^CAWS-VERDICT-[A-Z0-9]{16}$",
      "description": "Unique verdict identifier"
    },
    "status": {
      "type": "string",
      "enum": ["PASS", "FAIL", "WAIVER_REQUIRED"],
      "description": "Adjudication status"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of verdict"
    },
    "change_id": {
      "type": "string",
      "description": "Identifier for the change being adjudicated"
    },
    "caws_compliance": {
      "type": "object",
      "required": ["budget_adherence", "gate_integrity", "provenance_clarity"],
      "properties": {
        "budget_adherence": {
          "type": "object",
          "properties": {
            "max_loc": {"type": "integer", "minimum": 0},
            "max_files": {"type": "integer", "minimum": 0},
            "within_budget": {"type": "boolean"}
          }
        },
        "gate_integrity": {
          "type": "object",
          "properties": {
            "tests_pass": {"type": "boolean"},
            "lint_pass": {"type": "boolean"},
            "coverage_pass": {"type": "boolean"},
            "all_gates_pass": {"type": "boolean"}
          }
        },
        "provenance_clarity": {
          "type": "object",
          "properties": {
            "rationale_present": {"type": "boolean"},
            "evidence_manifest_present": {"type": "boolean"},
            "diff_present": {"type": "boolean"},
            "alignment_score": {"type": "number", "minimum": 0, "maximum": 1}
          }
        }
      }
    },
    "clause_mappings": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "caws_section": {"type": "string"},
          "caws_clause": {"type": "string"},
          "relevance_score": {"type": "number", "minimum": 0, "maximum": 1}
        }
      }
    },
    "evidence_quality": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Overall evidence quality score"
    },
    "waiver_info": {
      "type": "object",
      "properties": {
        "waiver_id": {"type": "string"},
        "waiver_reason": {"type": "string"},
        "expires_at": {"type": "string", "format": "date-time"}
      }
    },
    "arbiter_reasoning": {
      "type": "string",
      "description": "Arbiter's reasoning for the verdict"
    }
  }
}

